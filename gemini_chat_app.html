<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini AI „ÉÅ„É£„ÉÉ„Éà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4285f4 0%, #34a853 50%, #ea4335 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .app-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .app-header {
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .app-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .api-status {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-indicator.demo {
            background: #ffc107;
        }
        
        .status-indicator.connected {
            background: #28a745;
        }
        
        .status-indicator.disconnected {
            background: #dc3545;
        }
        
        .setup-section {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .setup-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .setup-info h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .setup-info p {
            color: #1976d2;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .api-config {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .api-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
        }
        
        .api-input:focus {
            outline: none;
            border-color: #4285f4;
        }
        
        .config-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            margin-right: 10px;
        }
        
        .config-btn.connect {
            background: #4285f4;
            color: white;
        }
        
        .config-btn.connect:hover {
            background: #3367d6;
        }
        
        .config-btn.connect.active {
            background: #1a73e8;
            transform: scale(0.95);
        }
        
        .config-btn.demo {
            background: #ffc107;
            color: #212529;
        }
        
        .config-btn.demo:hover {
            background: #e0a800;
        }
        
        .config-btn.demo.active {
            background: #d39e00;
            transform: scale(0.95);
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        
        .message {
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .message.user {
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .message-avatar.user {
            background: #4285f4;
            color: white;
        }
        
        .message-avatar.ai {
            background: #34a853;
            color: white;
        }
        
        .message-content {
            max-width: 70%;
            padding: 15px;
            border-radius: 15px;
            line-height: 1.5;
            word-wrap: break-word;
        }
        
        .message.user .message-content {
            background: #4285f4;
            color: white;
        }
        
        .message.ai .message-content {
            background: #f1f3f4;
            color: #333;
        }
        
        .message.ai .message-content pre {
            background: #e8f0fe;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .message.ai .message-content code {
            background: #e8f0fe;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        .message-time {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #34a853;
            animation: typing 1.5s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }
        
        .input-container {
            padding: 20px;
            border-top: 1px solid #e9ecef;
            background: white;
        }
        
        .input-wrapper {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        
        .message-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            resize: none;
            max-height: 120px;
            line-height: 1.4;
        }
        
        .message-input:focus {
            outline: none;
            border-color: #4285f4;
        }
        
        .send-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: #4285f4;
            color: white;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .send-btn:hover {
            background: #3367d6;
            transform: scale(1.05);
        }
        
        .send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .quick-prompts {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .quick-prompt {
            padding: 8px 15px;
            background: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .quick-prompt:hover {
            background: #e8f0fe;
            border-color: #4285f4;
        }
        
        .error-message {
            background: #ffeaa7;
            color: #2d3436;
            padding: 15px;
            border-radius: 10px;
            margin: 20px;
            display: none;
        }
        
        .welcome-message {
            text-align: center;
            color: #666;
            padding: 40px 20px;
            font-style: italic;
        }
        
        .welcome-message .emoji {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <div class="app-header">
            <div class="app-title">ü§ñ Gemini AI „ÉÅ„É£„ÉÉ„Éà</div>
            <div class="api-status">
                <span class="status-indicator demo" id="statusIndicator"></span>
                <span id="statusText">„Éá„É¢„É¢„Éº„Éâ</span>
            </div>
        </div>
        
        <!-- APIË®≠ÂÆö„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="setup-section">
            <div class="setup-info">
                <h4>üîë Gemini APIË®≠ÂÆöÊñπÊ≥ï</h4>
                <p>
                    <strong>„Çπ„ÉÜ„ÉÉ„Éó1:</strong> <a href="https://ai.google.dev/" target="_blank">Google AI Studio</a> „ÅßAPI„Ç≠„Éº„ÇíÁÑ°ÊñôÂèñÂæó<br>
                    <strong>„Çπ„ÉÜ„ÉÉ„Éó2:</strong> HTML„ÅÆ<code>GEMINI_API_KEY</code>ÈÉ®ÂàÜ„Å´Ë≤º„Çä‰ªò„Åë<br>
                    <strong>„Çπ„ÉÜ„ÉÉ„Éó3:</strong> „Äåüî• API„É¢„Éº„Éâ„Äç„Å´Âàá„ÇäÊõø„Åà„Å¶Êú¨Ê†º„ÉÅ„É£„ÉÉ„ÉàÔºÅ
                </p>
            </div>
            
            <div class="api-config">
                <button class="config-btn demo" onclick="switchMode('demo')">üöÄ „Éá„É¢„É¢„Éº„Éâ</button>
                <button class="config-btn connect" onclick="switchMode('api')">üî• API„É¢„Éº„Éâ</button>
            </div>
        </div>
        
        <!-- „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏ -->
        <div class="error-message" id="errorMessage"></div>
        
        <!-- „ÉÅ„É£„ÉÉ„Éà„Ç≥„É≥„ÉÜ„Éä -->
        <div class="chat-container">
            <div class="messages" id="messages">
                <div class="welcome-message">
                    <span class="emoji">ü§ñ</span>
                    <div>Gemini AI„Å®„ÉÅ„É£„ÉÉ„Éà„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ</div>
                    <div>‰∏ã„ÅÆ„ÇØ„Ç§„ÉÉ„ÇØ„Éó„É≠„É≥„Éó„Éà„Åã„ÄÅÁõ¥Êé•„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div>
                </div>
            </div>
            
            <!-- „Çø„Ç§„Éî„É≥„Ç∞„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="message-avatar ai">ü§ñ</div>
                <div>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÂÖ•Âäõ„Ç®„É™„Ç¢ -->
        <div class="input-container">
            <div class="quick-prompts">
                <div class="quick-prompt" onclick="sendQuickPrompt('„Åì„Çì„Å´„Å°„ÅØÔºÅËá™Â∑±Á¥π‰ªã„Åó„Å¶„Åè„Å†„Åï„ÅÑ')">üëã Ëá™Â∑±Á¥π‰ªã</div>
                <div class="quick-prompt" onclick="sendQuickPrompt('„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶')">üíª „Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞</div>
                <div class="quick-prompt" onclick="sendQuickPrompt('Èù¢ÁôΩ„ÅÑÈõëÂ≠¶„ÇíÊïô„Åà„Å¶')">üéØ ÈõëÂ≠¶</div>
                <div class="quick-prompt" onclick="sendQuickPrompt('‰ªäÊó•„ÅÆÂ§©Ê∞ó„ÅØ„Å©„ÅÜ„Åß„Åô„ÅãÔºü')">üå§Ô∏è Â§©Ê∞ó</div>
            </div>
            
            <div class="input-wrapper">
                <textarea 
                    id="messageInput" 
                    class="message-input" 
                    placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."
                    rows="1"
                ></textarea>
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">üì§</button>
            </div>
        </div>
    </div>

    <script>
        // ‚ö†Ô∏è „Åì„Åì„Å´Gemini API„Ç≠„Éº„ÇíË≤º„Çä‰ªò„Åë„Å¶„Åè„Å†„Åï„ÅÑ ‚ö†Ô∏è
        const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY'; // Google AI Studio„ÅßÂèñÂæó„Åó„ÅüAPI„Ç≠„Éº„Çí„Åì„Åì„Å´
        
        // „Ç¢„Éó„É™„ÅÆÁä∂ÊÖã
        let currentMode = 'demo'; // 'demo' „Åæ„Åü„ÅØ 'api'
        let chatHistory = [];
        
        // ÂàùÊúüÂåñ
        window.onload = function() {
            setupTextarea();
            switchMode('demo');
        };
        
        // „ÉÜ„Ç≠„Çπ„Éà„Ç®„É™„Ç¢„ÅÆËá™Âãï„É™„Çµ„Ç§„Ç∫Ë®≠ÂÆö
        function setupTextarea() {
            const textarea = document.getElementById('messageInput');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = this.scrollHeight + 'px';
            });
            
            textarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }
        
        // „É¢„Éº„ÉâÂàá„ÇäÊõø„Åà
        window.switchMode = (mode) => {
            currentMode = mode;
            
            const demoBtn = document.querySelector('.config-btn.demo');
            const apiBtn = document.querySelector('.config-btn.connect');
            
            // „Éú„Çø„É≥„ÅÆÁä∂ÊÖãÊõ¥Êñ∞
            demoBtn.classList.remove('active');
            apiBtn.classList.remove('active');
            
            if (mode === 'demo') {
                demoBtn.classList.add('active');
                updateStatus('demo', '„Éá„É¢„É¢„Éº„Éâ - Ë®≠ÂÆö‰∏çË¶Å„Åß‰ΩìÈ®ì');
            } else {
                apiBtn.classList.add('active');
                
                if (GEMINI_API_KEY === 'YOUR_GEMINI_API_KEY') {
                    updateStatus('disconnected', 'Êú™Ë®≠ÂÆö - HTML„Éï„Ç°„Ç§„É´„ÇíÁ∑®ÈõÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    showError('API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇHTML„Éï„Ç°„Ç§„É´„ÅÆ GEMINI_API_KEY „ÇíÁ∑®ÈõÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                } else {
                    updateStatus('connected', 'Gemini API Êé•Á∂öÊ∏à„Åø');
                    hideError();
                }
            }
            
            addWelcomeMessage();
        };
        
        // „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞
        function updateStatus(status, text) {
            const indicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            indicator.className = `status-indicator ${status}`;
            statusText.textContent = text;
        }
        
        // „Ç¶„Çß„É´„Ç´„É†„É°„ÉÉ„Çª„Éº„Ç∏ËøΩÂä†
        function addWelcomeMessage() {
            const messagesContainer = document.getElementById('messages');
            messagesContainer.innerHTML = `
                <div class="welcome-message">
                    <span class="emoji">ü§ñ</span>
                    <div>Gemini AI„Å®„ÉÅ„É£„ÉÉ„Éà„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ</div>
                    <div>‰∏ã„ÅÆ„ÇØ„Ç§„ÉÉ„ÇØ„Éó„É≠„É≥„Éó„Éà„Åã„ÄÅÁõ¥Êé•„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div>
                </div>
            `;
            chatHistory = [];
        }
        
        // „ÇØ„Ç§„ÉÉ„ÇØ„Éó„É≠„É≥„Éó„ÉàÈÄÅ‰ø°
        window.sendQuickPrompt = (prompt) => {
            document.getElementById('messageInput').value = prompt;
            sendMessage();
        };
        
        // „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°
        window.sendMessage = async () => {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // „É¶„Éº„Ç∂„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
            addMessage('user', message);
            input.value = '';
            input.style.height = 'auto';
            
            // ÈÄÅ‰ø°„Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñ
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            
            // „Çø„Ç§„Éî„É≥„Ç∞„Ç§„É≥„Ç∏„Ç±„Éº„Çø„ÉºË°®Á§∫
            showTyping();
            
            try {
                let response;
                
                if (currentMode === 'demo') {
                    // „Éá„É¢„É¨„Çπ„Éù„É≥„Çπ
                    response = await getDemoResponse(message);
                } else if (GEMINI_API_KEY !== 'YOUR_GEMINI_API_KEY') {
                    // ÂÆüÈöõ„ÅÆGemini APIÂëº„Å≥Âá∫„Åó
                    response = await callGeminiAPI(message);
                } else {
                    throw new Error('API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                }
                
                // AI„É¨„Çπ„Éù„É≥„Çπ„ÇíË°®Á§∫
                hideTyping();
                addMessage('ai', response);
                
            } catch (error) {
                console.error('„É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Ç®„É©„Éº:', error);
                hideTyping();
                addMessage('ai', '„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Åó„Å∞„Çâ„ÅèÂæÖ„Å£„Å¶„Åã„ÇâÂÜçË©¶Ë°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
            }
            
            // ÈÄÅ‰ø°„Éú„Çø„É≥„ÇíÂÜçÊúâÂäπÂåñ
            sendBtn.disabled = false;
        };
        
        // Gemini APIÂëº„Å≥Âá∫„Åó
        async function callGeminiAPI(message) {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_API_KEY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: message
                        }]
                    }]
                })
            });
            
            if (!response.ok) {
                if (response.status === 400) {
                    throw new Error('API„Ç≠„Éº„ÅåÁÑ°Âäπ„Åã„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì');
                } else if (response.status === 403) {
                    throw new Error('API„Ç≠„Éº„ÅÆÊ®©Èôê„Åå„Å™„ÅÑ„Åã„ÄÅÂà∂Èôê„Å´ÈÅî„Åó„Å¶„ÅÑ„Åæ„Åô');
                } else {
                    throw new Error(`API Error: ${response.status}`);
                }
            }
            
            const data = await response.json();
            
            if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                return data.candidates[0].content.parts[0].text;
            } else {
                throw new Error('API„Åã„ÇâÊúâÂäπ„Å™ÂøúÁ≠î„ÅåÂæó„Çâ„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü');
            }
        }
        
        // „Éá„É¢„É¨„Çπ„Éù„É≥„Çπ
        async function getDemoResponse(message) {
            // „É™„Ç¢„É´„Å™ÂøúÁ≠îÊôÇÈñì„Çí„Ç∑„Éü„É•„É¨„Éº„Éà
            await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
            
            const demoResponses = {
                '„Åì„Çì„Å´„Å°„ÅØ': '„Åì„Çì„Å´„Å°„ÅØÔºÅÁßÅ„ÅØGemini AI„Åß„Åô„ÄÇ„Å©„ÅÆ„Çà„ÅÜ„Å™„Åì„Å®„Åß„ÅäÊâã‰ºù„ÅÑ„Åß„Åç„Åæ„Åô„ÅãÔºü',
                '„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞': '„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞„ÅØÁ¥†Êô¥„Çâ„Åó„ÅÑ„Çπ„Ç≠„É´„Åß„ÅôÔºÅ„Å©„ÅÆË®ÄË™û„Å´ËààÂë≥„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºüPython„ÄÅJavaScript„ÄÅHTML/CSS „Å™„Å©„Åå„ÅÇ„Çä„Åæ„Åô„Å≠„ÄÇ',
                'ÈõëÂ≠¶': 'Èù¢ÁôΩ„ÅÑÈõëÂ≠¶„Çí„ÅäÊïô„Åà„Åó„Åæ„Åó„Çá„ÅÜÔºÅüêô„Çø„Ç≥„Å´„ÅØ3„Å§„ÅÆÂøÉËáì„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ2„Å§„ÅØÈ∞ì„Å´Ë°ÄÊ∂≤„ÇíÈÄÅ„Çä„ÄÅ1„Å§„ÅØ‰ΩìÂÖ®‰Ωì„Å´Ë°ÄÊ∂≤„ÇíÈÄÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                'Â§©Ê∞ó': 'Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„Åå„ÄÅÁßÅ„ÅØÁèæÂú®„ÅÆÂ§©Ê∞óÊÉÖÂ†±„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Åä‰Ωè„Åæ„ÅÑ„ÅÆÂú∞Âüü„ÅÆÂ§©Ê∞ó‰∫àÂ†±„Ç¢„Éó„É™„Çí„ÅîÁ¢∫Ë™ç„Åè„Å†„Åï„ÅÑÔºÅ',
                'Ëá™Â∑±Á¥π‰ªã': 'ÁßÅ„ÅØGemini AI„Åß„ÅôÔºÅü§ñ Ë≥™Âïè„Å´Á≠î„Åà„Åü„Çä„ÄÅÂâµ‰Ωú„ÇíÊâã‰ºù„Å£„Åü„Çä„ÄÅÊßò„ÄÖ„Å™Ë©±È°å„Å´„Å§„ÅÑ„Å¶‰ºöË©±„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ‰Ωï„Åß„ÇÇ„ÅäËÅû„Åç„Åè„Å†„Åï„ÅÑÔºÅ'
            };
            
            // „Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞
            for (const [keyword, response] of Object.entries(demoResponses)) {
                if (message.includes(keyword)) {
                    return response;
                }
            }
            
            // „Éá„Éï„Ç©„É´„Éà„É¨„Çπ„Éù„É≥„Çπ
            const defaultResponses = [
                '„Å®„Å¶„ÇÇËààÂë≥Ê∑±„ÅÑË≥™Âïè„Åß„Åô„Å≠ÔºÅ„ÇÇ„ÅÜÂ∞ë„ÅóË©≥„Åó„ÅèÊïô„Åà„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü',
                '„Åù„Çå„Å´„Å§„ÅÑ„Å¶ËÄÉ„Åà„Å¶„Åø„Åæ„Åô„Å≠„ÄÇ‰ªñ„Å´‰Ωï„Åã„ÅäËÅû„Åç„Åó„Åü„ÅÑ„Åì„Å®„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü',
                '„Å™„Çã„Åª„Å©„ÄÅ„Åù„ÅÆ„Çà„ÅÜ„Å™Ë¶≥ÁÇπ„ÇÇ„ÅÇ„Çä„Åæ„Åô„Å≠„ÄÇ„Å©„ÅÜÊÄù„Çè„Çå„Åæ„Åô„ÅãÔºü',
                'Èù¢ÁôΩ„ÅÑ„Éà„Éî„ÉÉ„ÇØ„Åß„Åô„Å≠ÔºÅ„ÇÇ„Å£„Å®Ë©≥„Åó„Åè„ÅäË©±„Åó„ÅÑ„Åü„Å†„Åë„Çã„Å®Â¨â„Åó„ÅÑ„Åß„Åô„ÄÇ'
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }
        
        // „É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
        function addMessage(sender, content) {
            const messagesContainer = document.getElementById('messages');
            const isFirstMessage = messagesContainer.querySelector('.welcome-message') !== null;
            
            if (isFirstMessage) {
                messagesContainer.innerHTML = '';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('ja-JP', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.innerHTML = `
                <div class="message-avatar ${sender}">
                    ${sender === 'user' ? 'üë§' : 'ü§ñ'}
                </div>
                <div class="message-content">
                    ${formatMessage(content)}
                    <div class="message-time">${timeString}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // „ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥„Å´ËøΩÂä†
            chatHistory.push({ sender, content, time: timeString });
        }
        
        // „É°„ÉÉ„Çª„Éº„Ç∏„Éï„Ç©„Éº„Éû„ÉÉ„Éà
        function formatMessage(content) {
            // „Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂá¶ÁêÜ
            content = content.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
            
            // „Ç§„É≥„É©„Ç§„É≥„Ç≥„Éº„Éâ„ÅÆÂá¶ÁêÜ
            content = content.replace(/`([^`]+)`/g, '<code>$1</code>');
            
            // ÊîπË°å„ÅÆÂá¶ÁêÜ
            content = content.replace(/\n/g, '<br>');
            
            return content;
        }
        
        // „Çø„Ç§„Éî„É≥„Ç∞„Ç§„É≥„Ç∏„Ç±„Éº„Çø„ÉºË°®Á§∫/ÈùûË°®Á§∫
        function showTyping() {
            document.getElementById('typingIndicator').style.display = 'flex';
            const messagesContainer = document.getElementById('messages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function hideTyping() {
            document.getElementById('typingIndicator').style.display = 'none';
        }
        
        // „Ç®„É©„ÉºË°®Á§∫/ÈùûË°®Á§∫
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }
        
        function hideError() {
            document.getElementById('errorMessage').style.display = 'none';
        }
    </script>
</body>
</html>